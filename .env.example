# =============================================================================
# Aurelius Medical Imaging Platform + Cancer AI
# Environment Configuration Template
# =============================================================================
#
# Copy this file to .env and update with your actual values
# DO NOT commit .env to version control
#

# =============================================================================
# GENERAL
# =============================================================================
ENVIRONMENT=development
DEBUG=false
LOG_LEVEL=INFO

# =============================================================================
# DATABASE
# =============================================================================
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=aurelius
DATABASE_URL=postgresql://postgres:postgres@postgres:5432/aurelius

# =============================================================================
# REDIS
# =============================================================================
REDIS_PASSWORD=redis123
REDIS_URL=redis://:redis123@redis:6379/0

# =============================================================================
# MINIO (S3-compatible Object Storage)
# =============================================================================
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin
MINIO_ENDPOINT=minio:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_SECURE=false

# MinIO Buckets (created automatically)
# - dicom-studies
# - wsi-slides
# - ml-models
# - processed-data
# - cancer-ai-models

# =============================================================================
# KEYCLOAK (Authentication)
# =============================================================================
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=admin
KEYCLOAK_URL=http://keycloak:8080
KEYCLOAK_REALM=aurelius
KEYCLOAK_CLIENT_ID=gateway
KEYCLOAK_CLIENT_SECRET=gateway-secret

# =============================================================================
# ORTHANC (DICOM Server)
# =============================================================================
ORTHANC_URL=http://orthanc:8042
ORTHANC_USERNAME=orthanc
ORTHANC_PASSWORD=orthanc

# =============================================================================
# MICROSERVICES URLS (Internal Docker Network)
# =============================================================================
IMAGING_SVC_URL=http://imaging-svc:8001
ML_SVC_URL=http://ml-svc:8002
CANCER_AI_SVC_URL=http://cancer-ai-svc:8003
ETL_SVC_URL=http://etl-svc:8004
FHIR_SVC_URL=http://fhir-server:8080/fhir
SEARCH_SVC_URL=http://search-svc:8004

# =============================================================================
# API GATEWAY
# =============================================================================
GATEWAY_URL=http://gateway:8000
GATEWAY_PORT=8000
SECRET_KEY=your-secret-key-change-in-production-minimum-32-characters
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# CORS Origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://localhost:10100,http://localhost:8000

# Rate Limiting
RATE_LIMIT_PER_MINUTE=60

# =============================================================================
# CANCER AI SERVICE
# =============================================================================
CANCER_AI_PORT=8003
MODEL_PATH=/app/models/cancer_detector.onnx
MINIO_BUCKET_CANCER_AI=cancer-ai-models

# Cancer AI Model Configuration
CANCER_AI_BATCH_SIZE=16
CANCER_AI_GPU_ENABLED=false

# =============================================================================
# FRONTEND (Next.js)
# =============================================================================
NEXT_PUBLIC_API_URL=http://localhost:10200
NEXT_PUBLIC_WS_URL=ws://localhost:10200
NEXT_PUBLIC_KEYCLOAK_URL=http://localhost:10300
NEXT_PUBLIC_KEYCLOAK_REALM=aurelius
NEXT_PUBLIC_KEYCLOAK_CLIENT_ID=frontend
NEXT_PUBLIC_CANCER_AI_ENABLED=true

# =============================================================================
# ML INFRASTRUCTURE
# =============================================================================
# MLflow
MLFLOW_TRACKING_URI=http://mlflow:5000
MLFLOW_S3_ENDPOINT_URL=http://minio:9000
AWS_ACCESS_KEY_ID=minioadmin
AWS_SECRET_ACCESS_KEY=minioadmin

# Triton Inference Server (Optional - requires GPU)
TRITON_URL=triton:8001
TRITON_ENABLED=false

# =============================================================================
# SEARCH & INDEXING
# =============================================================================
OPENSEARCH_URL=http://opensearch:9200
OPENSEARCH_JAVA_OPTS=-Xms512m -Xmx512m

# =============================================================================
# OBSERVABILITY
# =============================================================================
# Prometheus
ENABLE_METRICS=true
PROMETHEUS_PORT=9090

# Grafana
GF_SECURITY_ADMIN_USER=admin
GF_SECURITY_ADMIN_PASSWORD=admin
GF_SERVER_ROOT_URL=http://localhost:10500

# OpenTelemetry / Jaeger
ENABLE_TRACING=true
OTEL_EXPORTER_OTLP_ENDPOINT=http://jaeger:4317
OTEL_SERVICE_NAME=aurelius
OTEL_TRACES_EXPORTER=otlp
OTEL_METRICS_EXPORTER=prometheus
OTEL_LOGS_EXPORTER=none

# =============================================================================
# KAFKA (Event Streaming)
# =============================================================================
KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://kafka:9092
KAFKA_LISTENERS=PLAINTEXT://0.0.0.0:9092,CONTROLLER://0.0.0.0:9093
CLUSTER_ID=MkU3OEVBNTcwNTJENDM2Qk

# =============================================================================
# FHIR SERVER
# =============================================================================
FHIR_VERSION=R4

# =============================================================================
# SECURITY
# =============================================================================
# Encryption (for production)
ENCRYPTION_KEY=changeme-use-32-byte-key-minimum
ENCRYPTION_ALGORITHM=AES-256-GCM

# JWT
JWT_SECRET=your-jwt-secret-key-change-in-production
JWT_ALGORITHM=RS256
JWT_EXPIRATION=3600

# SSL/TLS (for production)
SSL_CERT_PATH=/certs/cert.pem
SSL_KEY_PATH=/certs/key.pem
SSL_ENABLED=false

# =============================================================================
# BACKUP & RECOVERY
# =============================================================================
BACKUP_ENABLED=false
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=7
BACKUP_S3_BUCKET=aurelius-backups

# =============================================================================
# COMPLIANCE
# =============================================================================
# HIPAA Compliance
HIPAA_AUDIT_ENABLED=true
HIPAA_AUDIT_RETENTION_YEARS=7
DEIDENTIFICATION_ENABLED=true

# PHI Access Logging
PHI_ACCESS_LOG_ENABLED=true
PHI_ACCESS_LOG_RETENTION_DAYS=2555  # 7 years

# =============================================================================
# PERFORMANCE & SCALING
# =============================================================================
# Worker Configuration
CELERY_WORKERS=4
CELERY_CONCURRENCY=2

# Connection Pools
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
REDIS_MAX_CONNECTIONS=50

# Request Timeouts (seconds)
API_TIMEOUT=60
INFERENCE_TIMEOUT=120
DICOM_UPLOAD_TIMEOUT=300

# =============================================================================
# DEVELOPMENT / TESTING
# =============================================================================
# Test Mode (uses synthetic data)
TEST_MODE=false
SYNTHETIC_DATA_ENABLED=false

# Hot Reload (development only)
HOT_RELOAD=true

# Debug Endpoints
DEBUG_ENDPOINTS_ENABLED=false

# =============================================================================
# PORTS (External Access)
# =============================================================================
# These are the ports exposed on the host machine
FRONTEND_PORT=10100
GATEWAY_PORT=10200
KEYCLOAK_PORT=10300
POSTGRES_PORT=10400
GRAFANA_PORT=10500
PROMETHEUS_PORT=10600
MINIO_PORT=10700
MINIO_CONSOLE_PORT=10701
MLFLOW_PORT=10800
FHIR_PORT=10900
OPENSEARCH_PORT=11000
ORTHANC_WEB_PORT=8042
ORTHANC_DICOM_PORT=4242

# Service Ports (internal)
IMAGING_SVC_PORT=8001
ML_SVC_PORT=8002
CANCER_AI_SVC_PORT=8003
SEARCH_SVC_PORT=8004

# =============================================================================
# FEATURE FLAGS
# =============================================================================
FEATURE_CANCER_AI=true
FEATURE_WSI_VIEWER=true
FEATURE_FHIR_INTEGRATION=true
FEATURE_GENOMICS=false
FEATURE_CLINICAL_TRIALS=false
FEATURE_TELEPATHOLOGY=false

# =============================================================================
# NOTIFICATIONS (Optional)
# =============================================================================
EMAIL_ENABLED=false
EMAIL_SMTP_HOST=smtp.gmail.com
EMAIL_SMTP_PORT=587
EMAIL_USERNAME=your-email@example.com
EMAIL_PASSWORD=your-app-password
EMAIL_FROM=noreply@aurelius.com

# Slack Notifications
SLACK_ENABLED=false
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# =============================================================================
# CLOUD STORAGE (Optional - for production)
# =============================================================================
# AWS S3
AWS_S3_BUCKET=aurelius-production
AWS_REGION=us-east-1
AWS_S3_ENABLED=false

# Google Cloud Storage
GCS_BUCKET=aurelius-production
GCS_PROJECT_ID=your-project-id
GCS_ENABLED=false

# Azure Blob Storage
AZURE_STORAGE_ACCOUNT=aureliusstorage
AZURE_STORAGE_KEY=your-storage-key
AZURE_ENABLED=false

# =============================================================================
# MONITORING & ALERTS (Optional)
# =============================================================================
# Sentry (Error Tracking)
SENTRY_DSN=
SENTRY_ENABLED=false

# DataDog
DATADOG_API_KEY=
DATADOG_ENABLED=false

# PagerDuty
PAGERDUTY_API_KEY=
PAGERDUTY_ENABLED=false

# =============================================================================
# LICENSE & BILLING (Optional)
# =============================================================================
LICENSE_KEY=
STRIPE_API_KEY=
STRIPE_WEBHOOK_SECRET=
BILLING_ENABLED=false

# =============================================================================
# NOTES
# =============================================================================
# 1. Change all passwords and secrets in production
# 2. Use strong encryption keys (minimum 32 bytes)
# 3. Enable SSL/TLS for production deployments
# 4. Configure backups for production data
# 5. Review and adjust resource limits in docker-compose.yml
# 6. Set up monitoring and alerting
# 7. Configure proper CORS origins
# 8. Enable MFA for administrator accounts
# 9. Review HIPAA compliance checklist
# 10. Test disaster recovery procedures
